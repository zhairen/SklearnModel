import numpy as np
import statsmodels.tsa.stattools as ts
import pandas as pd

np.random.seed(12345)
ut = np.random.randint(-30, 30, size=(100))
xt = np.cumsum(ut)

print(ts.adfuller(xt))
# (-1.5243530203505073, 0.5214317018385488, 0, 99, {'1%': -3.498198082189098, '5%': -2.891208211860468, '10%': -2.5825959973472097}, 845.9136155157069)

##### 差分变换
df = pd.DataFrame(xt)
df_diff1_1 = df.diff()      ### 1阶差分，步长为1
#print(df)
#print(df_diff1_1)
print(ts.adfuller(df_diff1_1[1:][0].tolist()))
# (-3.849731498648273, 0.0024375726243445746, 12, 86, {'1%': -3.5087828609430614, '5%': -2.895783561573195, '10%': -2.5850381719848565}, 740.2735055354956)
df_diff1_2 = df.diff(2)     ### 1阶差分，步长为2
print(ts.adfuller(df_diff1_2[2:][0].tolist()))
# (-4.012534867488554, 0.001346278712964153, 11, 86, {'1%': -3.5087828609430614, '5%': -2.895783561573195, '10%': -2.5850381719848565}, 736.1426417807885)
df_diff2 = df_diff1_1.diff()    ### 2阶差分，步长为1
print(ts.adfuller(df_diff2[2:][0].tolist()))
# (-5.307353752105175, 5.286830381426628e-06, 10, 87, {'1%': -3.5078527246648834, '5%': -2.895382030636155, '10%': -2.584823877658872}, 744.9060722567168)